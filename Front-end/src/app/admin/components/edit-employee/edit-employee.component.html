<mat-toolbar>
  <div class="leftContent">
    <fa-icon routerLink="../" [icon]="faCircleArrowLeft" class="back"></fa-icon
    ><span class="back-word">Back</span>
    <img
      src="../../../../assets/images/logo.png"
      alt=""
      srcset=""
      class="logo"
    />
  </div>
</mat-toolbar>
<div class="header-style">
  <fa-icon class="add-icon" [icon]="faUser"></fa-icon>
  <h2 class="header-headings">ALL EMPLOYEES</h2>
</div>
<div class="Employee-container">
    <div class="profile-container">
      <div class="container-1">
        <p class="profile-heading">EMPLOYEE PROFILE</p>
        <div>
          <p class="sub-heading2">Employee Id: {{backData[0].id}}</p>
          <p class="sub-heading2">Date of join: {{backData[0].other_declaration==null?" ":backData[0].other_declaration.joining_date}}</p>
        </div>
      </div>
      <div>
        <div class="userProfile">
            <div class="profile-img">
              <img
                [src]="src == '' ? '../../../../assets/images/pro.webp' : src"
                alt=""
                srcset=""
              />
            </div>
            <form>
              <label for="pic" class="cam"
                ><mat-icon>add_a_photo</mat-icon></label
              >
    
              <input
                style="display: none"
                type="file"
                name="pic"
                id="pic"
                (change)="fileChange($event,'pic')"
              />
            </form>
          </div>
        <h4 class="sub-headin1">{{backData[0].name}}</h4>
        <h4 class="sub-headin1">{{backData[0].designation}}</h4>
      </div>
      <div class="profile-creation-details">
        <p>Created By : {{backData[0].created_by}}</p>
        <p>Created On : {{backData[0].created_at | date:'dd-mm-yyyy'}}</p>
      </div>
    </div>
    <!-- personal info -->
    <mat-expansion-panel>
      <mat-expansion-panel-header>
        <mat-panel-title>
          <span>
            <fa-icon
              [icon]="faCircleCheck"
              [style.color]="
                backData[0].personal_info.first_name!=null && backData[0].personal_info.status == 'completed'? '#ff934f'
                  : 'rgba(128, 128, 128, 0.811)'
              "
              class="status-icon"
            ></fa-icon>
          </span>
  
          PERSONAL INFORMATION
        </mat-panel-title>
      </mat-expansion-panel-header>
      <div *ngIf="backData[0].personal_info.first_name!=null;">
        <mat-form-field appearance="outline">
          <mat-label>First Name</mat-label>
          <input
            matInput
            placeholder="First Name"
            [(ngModel)]="backData[0].personal_info.first_name" 
            required  minlength="3" #fname="ngModel" 
           pattern='^[a-zA-Z\s]*$'
           style="text-transform:capitalize;"
          />
          <mat-error 
          *ngIf="fname.errors?.['required'] && fname.pristine || fname.value.length==0"
          >First name is required</mat-error
        >

        <mat-error
          *ngIf="fname.errors?.['minlength'] && fname.value.length>0"
          >First name must conatin atleast 3 char</mat-error
        >

        <mat-error
          *ngIf="fname.errors?.['pattern'] && fname.value.length>0"
          >First name must contain only characters</mat-error
        >

        </mat-form-field>
        

        <mat-form-field appearance="outline">
          <mat-label>Last Name</mat-label>
          <input
            matInput
            placeholder="Last Name"
            [(ngModel)]="backData[0].personal_info.last_name"
            required  #lname="ngModel" 
            pattern='^[a-zA-Z\s]*$'
            style="text-transform:capitalize;"
          />
          <mat-error 
          *ngIf="lname.errors?.['required'] && lname.pristine || lname.value.length==0"
          >Last name is required</mat-error>
          <mat-error
          *ngIf="lname.errors?.['pattern'] && lname.value.length>0"
          >Last name must contain only characters</mat-error
        >
        </mat-form-field>
        <mat-form-field appearance="outline">
          <mat-label for="dob">D.O.B</mat-label>
          <input
            matInput
            [matDatepicker]="dob_picker"
            name="dob"
            id="dob"
            [(ngModel)]="backData[0].personal_info.dob"
            onkeydown="return false"
            onclick="return false"
            required  #dob="ngModel" 
          />
          <mat-datepicker-toggle
            matSuffix
            [for]="dob_picker"
          ></mat-datepicker-toggle>
          <mat-datepicker #dob_picker></mat-datepicker>
          <mat-error
          *ngIf="
            dob.invalid &&
            dob.touched"
          >Please select date of birth</mat-error
        >
        </mat-form-field>
        <mat-form-field appearance="outline">
          <mat-label>Gender</mat-label>
          <input
            matInput
            placeholder="Gender"
            [(ngModel)]="backData[0].personal_info.gender"
            required
            #gender="ngModel"
            minlength="4" maxlength="7"
            onkeypress="return /[a-zA-Z]/i.test(event.key)"
            pattern="^(?:Male|Female|Others)$"
            style="text-transform:capitalize;"
          />
          <mat-error 
          *ngIf="gender.errors?.['required'] && gender.pristine || gender.value.length==0"
          >Gender is required</mat-error
        >
        <mat-error
          *ngIf="gender.errors?.['pattern'] && gender.value.length>0"
          >Gender is invalid</mat-error
        >
        </mat-form-field>
        <mat-form-field appearance="outline">
          <mat-label>Mobile Number</mat-label>
          <input
            matInput
            placeholder="Mobile Number"
            [(ngModel)]="backData[0].personal_info.mobile_number"
            #mobileno="ngModel" 
            required
            maxlength="10"
            pattern="^[6-9]{1}[0-9]{9}$"
          />
          <mat-error
          *ngIf="mobileno.errors?.['required'] && mobileno.pristine || mobileno.value.length==0"
          >Mobile number is required</mat-error
        >

        <mat-error
          *ngIf="mobileno.errors?.['pattern'] && mobileno.dirty && mobileno.value.length>0"
          >Enter a valid mobile number</mat-error
        >
        </mat-form-field>
        <mat-form-field appearance="outline">
          <mat-label>Alternate Mobile Number</mat-label>
          <input
            matInput
            placeholder="Alternate Mobile Number"
            [(ngModel)]="
              backData[0].personal_info.alternate_number"
              #alternateno="ngModel" 
              required
              maxlength="10"
              pattern="^[6-9]{1}[0-9]{9}$"
          />
          <mat-error
          *ngIf="alternateno.errors?.['required'] && alternateno.pristine || alternateno.value.length==0"
          >Alternate Mobile number is required</mat-error
        >

        <mat-error
          *ngIf="alternateno.errors?.['pattern'] && alternateno.dirty && alternateno.value.length>0"
          >Enter a valid mobile number</mat-error
        >
        </mat-form-field>
        <mat-form-field appearance="outline">
          <mat-label>Personal Email</mat-label>
          <input
          type="email"
            matInput
            placeholder="Personal Email"
            [(ngModel)]="backData[0].personal_info.personal_email"
            #email="ngModel" 
            required
            pattern="^[a-zA-Z0-9+_.-]+@[a-zA-Z0-9.-]+.[a-z]{2,3}$"
          />
          <mat-error
          *ngIf="email.errors?.['required'] && email.pristine || email.value.length==0"
          >Email is required</mat-error
        >

        <mat-error
          *ngIf="email.errors?.['pattern'] || email.errors?.['email']  && email.dirty && email.value.length>0"
          >Enter a valid email id</mat-error
        >
        </mat-form-field>
        <mat-form-field appearance="outline">
          <mat-label >Father Name</mat-label>
    
          <input
            matInput
            placeholder="Father Name"
            name="father_name"
            minlength="3"
           [(ngModel)]="backData[0].personal_info.father_name"
           required
           #father_name="ngModel"
           pattern='^[a-zA-Z\s]*$'
           style="text-transform:capitalize;"
          />
          <mat-error
          *ngIf="father_name.errors?.['required'] && father_name.pristine || father_name.value.length==0"
          >Father name is required</mat-error
        >
  
        <mat-error
          *ngIf="father_name.errors?.['pattern'] && father_name.dirty && father_name.value.length>0"
          >Father name must contain only characters</mat-error
        >
        </mat-form-field>
        <div *ngFor="let d of backData[0].address">
          <p class="type">{{ d.type}} Address</p>
        <mat-form-field appearance="outline">
          <mat-label>House NO</mat-label>
          <input 
          matInput 
          placeholder="House No" 
          [(ngModel)]="d.house_no"
          #house_no="ngModel"
          minlength="1" 
          required/>
          <mat-error
          *ngIf="
            house_no.invalid &&
            (house_no.dirty ||
              house_no.touched) &&
            house_no.errors?.required"
        >
          House Number is required
        </mat-error>
          <mat-error
            *ngIf="
            house_no.errors?.['minlength']"
          >
            Please enter valid house number
          </mat-error>
        </mat-form-field>
        <mat-form-field appearance="outline">
          <mat-label>Street/Area Name</mat-label>
          <input 
          matInput 
          placeholder="Street"
           [(ngModel)]="d.street"
           minlength="2"
           #street="ngModel"
           required
            />
            <mat-error
            *ngIf="
              street.invalid &&
              (street.dirty ||
                street.touched) &&
              street.errors?.required
            "
          >
            Street or Area name is required
          </mat-error>
          <mat-error
            *ngIf="
          !street.errors?.required && street.errors?.['minlength']"
          >
            Please enter valid street or area name
          </mat-error>
        </mat-form-field>
        <mat-form-field appearance="outline">
          <mat-label>Locality</mat-label>
          <input
            matInput
            placeholder="Locality"
            [(ngModel)]="d.locality"
            required
            minlength="2"
            #locality="ngModel"
          />
          <mat-error
            *ngIf="
              locality.invalid &&
              (locality.dirty ||
                locality.touched) &&
              locality.errors?.required
            "
          >
            locality is required
          </mat-error>
          <mat-error
            *ngIf="
          !locality.errors?.required && locality.errors?.['minlength']"
          >
            Please enter valid locality
          </mat-error>
        </mat-form-field>
        <mat-form-field appearance="outline">
          <mat-label>City</mat-label>
          <input 
          matInput
           placeholder="city"
            [(ngModel)]="d.city" 
            required  minlength="3" #city="ngModel" 
            pattern='^[a-zA-Z\s]*$'
            style="text-transform:capitalize;"/>
            <mat-error
            *ngIf="city.errors?.['required'] && city.pristine || city.value.length==0"
            >City is required</mat-error
          >
    
          <mat-error
            *ngIf="city.errors?.['pattern'] && city.dirty && city.value.length>0"
            >City name is invalid</mat-error
          >
        </mat-form-field>
        <mat-form-field appearance="outline">
          <mat-label>State</mat-label>
          <input 
          matInput
          placeholder="State" 
          [(ngModel)]="d.state"
          required  minlength="3" #state="ngModel" 
          pattern='^[a-zA-Z\s]*$'
          style="text-transform:capitalize;" />
          <mat-error
          *ngIf="state.errors?.['required'] && state.pristine || state.value.length==0"
          >State is required</mat-error
        >
  
        <mat-error
          *ngIf="state.errors?.['pattern'] && state.dirty && state.value.length>0 || state.errors?.['minlength']"
          >State name is invalid</mat-error
        >
        </mat-form-field>
        <mat-form-field appearance="outline">
          <mat-label>PinCode</mat-label>
          <input 
          matInput
           placeholder="PinCode"
          [(ngModel)]="d.pincode"
          minlength="6"
          required
          #pincode="ngModel"
          pattern="^[0-9]{6}$"/>
          <mat-error
          *ngIf="pincode.errors?.['required'] && pincode.pristine || pincode.value.length==0"
          >Pincode is required</mat-error
        >

        <mat-error
          *ngIf="pincode.errors?.['minlength'] || pincode.errors?.['pattern'] && pincode.dirty && pincode.value.length>0"
          >Pin code is invalid</mat-error
        >
        </mat-form-field>
        <mat-form-field appearance="outline">
          <mat-label>Country</mat-label>
          <input 
          matInput 
          placeholder="Country" 
          [(ngModel)]="d.country" 
          required  minlength="3" #country="ngModel" 
          pattern='^[a-zA-Z\s]*$'
          style="text-transform:capitalize;"/>
          <mat-error
          *ngIf="country.errors?.['required'] && country.pristine || country.value.length==0"
          >Country is required</mat-error
        >
  
        <mat-error
          *ngIf="country.errors?.['pattern'] && country.dirty && country.value.length>0 || country.errors?.['minlength']"
          >Country name is invalid</mat-error
        >
        </mat-form-field>
      </div>
      <button mat-button class="btn" (click)="submit()">
        Submit
      </button>
       
      </div>
     
    </mat-expansion-panel> 
    <!-- education -->
    <!-- <mat-expansion-panel>
      <mat-expansion-panel-header>
        <mat-panel-title>
          <span>
            <fa-icon
              [icon]="faCircleCheck"
              [style.color]="
              backData[0].educational_info.length>0
                  ? '#ff934f'
                  : 'rgba(128, 128, 128, 0.811)'
              "
              class="status-icon"
            ></fa-icon>
          </span>
  
          EDUCATIONAL DETAILS
        </mat-panel-title>
      </mat-expansion-panel-header>
      <div *ngIf="backData[0].educational_info.length>0;else notFilled ">
        <div *ngFor="let d of backData[0].educational_info;let i = index" class="backData-content">
          <p class="heading">{{ d.type }}</p>
          <div class="info personal-info">
            <div class="disp-row">
              <p class="heading">University/School name</p>
              <p class="datas">{{ d.name }}</p>
            </div>
            <div class="disp-row">
              <p class="heading">Board</p>
              <p class="datas">{{ d.board }}</p>
            </div>
            <div class="disp-row" *ngIf="d.type =='Graduation'  || d.type == 'Masters/Post-Graduation'">
              <p class="heading">Specilization</p>
              <p class="datas">{{ d.specialization }}</p>
            </div>
            <div class="disp-row" *ngIf="d.type == 'Graduation' || d.type == 'Masters'">
              <p class="heading">Course</p>
              <p class="datas">{{ d.course }}</p>
            </div>
  
            <div class="disp-row">
              <p class="heading">End Date</p>
              <p class="datas">{{ d.end_date }}</p>
            </div>
            <div class="disp-row">
              <p class="heading">Marks</p>
              <p class="datas">
                {{ d.marks }}{{ d.marks < 10 ? " CGPA" : " %" }}
              </p>
            </div>
            <div>
              <button mat-button (click)="openDialog('educational_info',i,d.type)">
                <mat-icon>folder</mat-icon>
              </button>
            </div>
          </div>
        </div>
      </div>
      <ng-template #notFilled>
        <p class="type" style="color: #ff934f; text-align: center">
          "Looks like the employee did not fill the deatils"
        </p>
      </ng-template>
    </mat-expansion-panel> -->
    <!-- Employment -->
    <!-- <mat-expansion-panel>
      <mat-expansion-panel-header>
        <mat-panel-title>
          <span>
            <fa-icon
              [icon]="faCircleCheck"
              [style.color]="
                backData[0].employment_details.length>0 && backData[0].employment_details[0].status== 'completed'
                  ? '#ff934f'
                  : 'rgba(128, 128, 128, 0.811)'
              "
              class="status-icon"
            ></fa-icon>
          </span>
  
          EMPLOYMENT DETAILS
        </mat-panel-title>
      </mat-expansion-panel-header>
      <div  *ngIf="backData[0].employment_details.length > 0; else notFilled">
        <div
          class="emp-info"
          *ngIf="backData[0].employment_details.length >0  && backData[0].employment_details[0]=='Fresher' ; else fresher"
        >
          <div
            class="info personal-info backData-content"
            *ngFor="let d of backData[0].employment_details;let i=index"
          >
            <div class="disp-row">
              <p class="heading">Organization Name</p>
              <p class="datas">{{ d.org_name }}</p>
            </div>
            <div class="disp-row">
              <p class="heading">Joining Date</p>
              <p class="datas">{{ d.joining_date }}</p>
            </div>
            <div class="disp-row">
              <p class="heading">Relieving Date</p>
              <p class="datas">{{ d.relieving_date }}</p>
            </div>
            <div class="disp-row" *ngIf="d.type == 'Recent'">
              <p class="heading">Notice Date</p>
              <p class="datas">{{ d.notice_date }}</p>
            </div>
            <div *ngIf="d.type != 'Recent'" class="dummy">
              <p class="heading">&emsp;&emsp;&emsp;</p>
              <p class="datas">&emsp;&emsp;&emsp;&emsp;</p>
            </div>
            <div>
              <button mat-button (click)="openDialog('employment_details',i,d.type)">
                <mat-icon>folder</mat-icon>
              </button>
            </div>
          </div>
        </div>
        <ng-template #fresher>
          <p class="type" style="color: #ff934f; text-align: center">
            "Looks like the employee is fresher"
          </p>
        </ng-template>
  
      </div>
    </mat-expansion-panel> -->
    <!-- others -->
    <!-- <mat-expansion-panel>
      <mat-expansion-panel-header>
        <mat-panel-title>
          <span>
            <fa-icon
              [icon]="faCircleCheck"
              [style.color]="
              backData[0].other_details!=null && backData[0].other_details.status== 'completed'
                  ? '#ff934f'
                  : 'rgba(128, 128, 128, 0.811)'
              "
              class="status-icon"
            ></fa-icon>
          </span>
  
          OTHER DETAILS
        </mat-panel-title>
      </mat-expansion-panel-header>
      <div  *ngIf="backData[0].other_details!=null;else notFilled">
  
        <p class="heading">Proof certificates:</p>
    <div class="info personal-info">
      <div class="disp-row">
        <p class="heading">Aadhar Number</p>
        <p class="datas">{{ backData[0].other_details.aadhar_card_number }}</p>
      </div>
       <div class="disp-row">
        <p class="heading">Pan Number</p>
        <p class="datas">{{ backData[0].other_details.pan_card_number }}</p>
      </div>
      <div class="disp-row">
        <p class="heading">Passport Number</p>
        <p class="datas">{{ backData[0].other_details.passport_number==''?'NA':backData[0].other_details.passport_number }}</p>
      </div>
      <div class="disp-row">
        <p class="heading">Passport Expire</p>
        <p class="datas">{{ backData[0].other_details.passport_expire_date==null?'NA':backData[0].other_details.passport_expire_date }}</p>
      </div> 
      <div>
                <button mat-button (click)="openDialog('other_details')">
                  <mat-icon>folder</mat-icon>
                </button>
              </div>
    </div>
    <p class="heading">Bank Details:</p>
        <div class="personal-info info" *ngIf="backData[0].bank_detail!=null">
          <div class="disp-row">
            <p class="heading">Account Holder Name</p>
            <p class="datas">{{ backData[0].bank_detail.account_holder_name }}</p>
          </div>
          <div class="disp-row">
            <p class="heading">Bank Name</p>
            <p class="datas">{{ backData[0].bank_detail.bank_name }}</p>
          </div>
          <div class="disp-row">
            <p class="heading">Account Number</p>
            <p class="datas">{{ backData[0].bank_detail.account_number }}</p>
          </div>
          <div class="disp-row">
            <p class="heading">IFSC Code</p>
            <p class="datas">{{ backData[0].bank_detail.ifsc_code }}</p>
          </div>
          <div class="disp-row">
            <p class="heading">Account Type</p>
            <p class="datas">{{ backData[0].bank_detail.account_type }}</p>
          </div>
          </div>
          <p class="heading">PF Details</p>
          <div class="info">
          <div class="disp-row">
            <p class="heading">PF Account Number</p>
            <p class="datas">{{ backData[0].bank_detail.pf_account_number==''?'NA':backData[0].bank_detail.pf_account_number }}</p>
          </div>
          <div class="disp-row">
            <p class="heading">UAN Account Number</p>
            <p class="datas">{{ backData[0].bank_detail.uan_account_number==''?'NA':backData[0].bank_detail.uan_account_number }}</p>
          </div>
        </div>
      </div>
       
     
    </mat-expansion-panel> -->
    <!-- declaration -->
    <!-- <mat-expansion-panel>
      <mat-expansion-panel-header>
        <mat-panel-title>
          <span>
            <fa-icon
              [icon]="faCircleCheck"
              [style.color]="
                backData[0].other_declaration!=null&&backData[0].other_declaration.status == 'completed'
                  ? '#ff934f'
                  : 'rgba(128, 128, 128, 0.811)'
              "
              class="status-icon"
            ></fa-icon>
          </span>
  
          DECLARATION
        </mat-panel-title>
      </mat-expansion-panel-header>
      <div>
  
        <div class="personal-info info" *ngIf="backData[0].other_declaration!=null;else notFilled">
          <div class="disp-row">
            <p class="heading">Joining Date</p>
            <p class="datas">{{ backData[0].other_declaration.joining_date }}</p>
          </div>
          <div class="disp-row">
            <p class="heading">Place</p>
            <p class="datas">{{ backData[0].other_declaration.place }}</p>
          </div>
          <div class="disp-row">
            <p class="heading">Date</p>
            <p class="datas">{{ backData[0].other_declaration.date }}</p>
          </div>
        </div>
      </div>
    </mat-expansion-panel> -->
  </div>